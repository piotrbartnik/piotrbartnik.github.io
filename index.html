<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="styles.css" type='text/css' rel='stylesheet'>
    <title>
        Playing with balls
    </title>
</head>

<body>
    <div id="actualDraw">

    </div>
    <div class="wrapper">
        <div class="button">


            <button onclick="los()" id="button">Losuj Lotto</button>
            <br/>
            <p> Ostatnie numery losowań: </p>
            <div class="numbers"></div>
            <p id="number0"></p>
            <br>
            <p id="number1"></p>
            <br>
            <p id="number2"></p>
            <br>
            <p id="number3"></p>
            <br>
            <p id="number4"></p>
            <br>
            <p id="number5"></p>
            <br>
            <p id="number6"></p>
        </div>
        <br>
        <button onclick="hit()" id="button">Ile prób zanim trafiłeś w ostatnie losowanie: </button>
        <br/>
        <p id="hit"></p>
        <br>

    </div>
    </div>
</body>


<script>


    var HttpClient = function () {
        this.get = function (aUrl, aCallback) {
            var anHttpRequest = new XMLHttpRequest();
            anHttpRequest.onreadystatechange = function () {
                if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
                    aCallback(anHttpRequest.responseText);
            }

            anHttpRequest.open("GET", aUrl, true);
            anHttpRequest.send(null);
        }
    }

    var client = new HttpClient();
    client.get('https://cors-anywhere.herokuapp.com/http://app.lotto.pl/wyniki/?type=dl', function (response) {
        var currentDraw = response;
        x = currentDraw.split("\n").slice(1, 7).sort((a, b) => { return a - b }).join(" ");
        // document.getElementById("number0").innerHTML = x;
        console.log(x);
        document.getElementById("number0").innerHTML = x;
    }
    );



    function los() {


        var x = [];

        for (i = 1; i < 50; i++) {
            x.push(i);
        }

        var z = [];
        for (i = 0; i < 6; i++) {
            y = x.length;
            g = Math.floor(Math.random() * y);
            b = x[g];
            z.push(b);
            x.splice(g, 1);
        }

        z.sort((a, b) => { return a - b });

        document.getElementById("number1").innerHTML = z[0];
        document.getElementById("number2").innerHTML = z[1];
        document.getElementById("number3").innerHTML = z[2];
        document.getElementById("number4").innerHTML = z[3];
        document.getElementById("number5").innerHTML = z[4];
        document.getElementById("number6").innerHTML = z[5];
    }

    function hit() {

        var counter = 0;


        for (j = 0; j < 15000000; j++) {
            var x = [];
            for (i = 1; i < 50; i++) {
                x.push(i);
            }
            var z = [];
            for (k = 0; k < 6; k++) {
                y = x.length;
                g = Math.floor(Math.random() * y);
                b = x[g];
                z.push(b);
                x.splice(g, 1);
            }

            z.sort((a, b) => { return a - b });
            var m = document.getElementById("number0").innerHTML;
            m.toString();
            var last = m.split(" ");

            counter += 1;

            if (last.toString() == z.toString()) {
                document.getElementById("hit").innerHTML = "Trafiony za " + counter + " razem" + z;
                console.log(counter);
                break;

            }
        }


    }
</script>

</html>